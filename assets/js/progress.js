(function(){function markUnitDone(unit,type){localStorage.setItem(`unit${unit}_${type}_done`,'true');const eng=localStorage.getItem(`unit${unit}_english_done`)==='true';const prog=localStorage.getItem(`unit${unit}_programming_done`)==='true';if(eng && prog){localStorage.setItem(`unit${unit}_complete`,'true'); if(window.location.pathname.includes('/learn/')) window.location.href = `unit_complete.html?unit=${unit}`; else window.location.href = `learn/unit_complete.html?unit=${unit}`;}}window.CL_markUnitDone = markUnitDone;document.addEventListener('DOMContentLoaded',()=>{const path=window.location.pathname; if(path.includes('activity_programming_unit')||path.includes('activity_english_unit')){const m=path.match(/unit(\d+)_/); if(m){const unit=m[1]; const eng=localStorage.getItem(`unit${unit}_english_done`)==='true'; const prog=localStorage.getItem(`unit${unit}_programming_done`)==='true'; if(eng && prog){const b=document.createElement('div');b.style.position='fixed';b.style.top='80px';b.style.right='20px';b.style.background='rgba(0,255,200,0.06)';b.style.color='#00FFC6';b.style.padding='10px';b.style.borderRadius='8px';b.textContent=`Unidad ${unit} completada (ambas partes).`;document.body.appendChild(b);} }}});})();